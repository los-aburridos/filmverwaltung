var ParseAdapter=DS.ParseAdapter=DS.RESTAdapter.extend({defaultSerializer:"_parse",init:function(){this._super(),this.set("headers",{"X-Parse-Application-Id":this.get("applicationId"),"X-Parse-REST-API-Key":this.get("restApiId")})},host:"https://api.parse.com",namespace:"1",classesPath:"classes",pathForType:function(e){var t=this.container.lookupFactory("model:"+e);return DS.ParseUserModel.detect(t)?"users":"login"===e?e:this.classesPath+"/"+t.parseClassName()}});Ember.onLoad("Ember.Application",function(e){e.initializer({name:"parse",initialize:function(e,t){t.register("serializer:_parse",DS.ParseSerializer)}})});var ParseSerializer=DS.ParseSerializer=DS.RESTSerializer.extend({primaryKey:"objectId",normalizeAttributes:function(e,t){e.eachAttribute(function(e,s){"date"===s.type&&"object"===Ember.typeOf(t[e])&&(t[e]=t[e].iso)}),this._super(e,t)},normalizeRelationships:function(e,t){this._super(e,t),e.eachRelationship(function(s,r){if(t[s]&&"belongsTo"===r.kind&&(t[s]=t[s].objectId),"hasMany"===r.kind){var a={where:{$relatedTo:{object:{__type:"Pointer",className:Ember.String.capitalize(e.parseClassName()),objectId:t.id},key:s}}};t[s]=this.get("store").findQuery(Ember.String.singularize(s),a)}},this)},normalizePayload:function(e,t){var s={};return s[e.typeKey]=t.results?t.results:t,s},serializeIntoHash:function(e,t,s,r){Ember.merge(e,this.serialize(s,r))},serializeAttribute:function(e,t,s,r){"date"===r.type&&"createdAt"!==s&&"updatedAt"!==s?t[s]={__type:"Date",iso:e.get(s)}:this._super(e,t,s,r)},serializeBelongsTo:function(e,t,s){var r=s.key,a=e.get(r);if(a){var i=a.parseClassName();t[r]={__type:"Pointer",className:i,objectId:a.get("id")}}},serializeHasMany:function(){}}),ParseModel=DS.ParseModel=DS.Model.extend({createdAt:DS.attr("date"),updatedAt:DS.attr("date"),parseClassName:function(){return this.constructor.parseClassName()}});ParseModel.reopenClass({parseClassName:function(){return Ember.String.capitalize(this.typeKey)}});var ParseUserModel=DS.ParseUserModel=ParseModel.extend({username:DS.attr("string"),password:DS.attr("string"),email:DS.attr("string"),emailVerified:DS.attr("boolean"),sessionToken:DS.attr("string"),isCurrent:Ember.computed.bool("currentUser"),_persist:function(e){var t=this,s=this.get("store").get("defaultAdapter"),r=s.get("headers");if(e&&(e.id=e.objectId,t=t.get("store").push(t.constructor,e),r["X-Parse-Session-Token"]=e.sessionToken,s.set("headers",r)),void 0!==typeof localStorage)if(e){this.set("currentUser",!0);var a={session:e.sessionToken,userId:e.objectId};localStorage.setItem("ember_parse_user",JSON.stringify(a))}else this.set("currentUser",!1),localStorage.removeItem("ember_parse_user")},signUp:function(){var e=this,t=this.get("store").get("defaultAdapter"),s={username:this.get("username"),password:this.get("password"),email:this.get("email")};t.ajax(t.buildURL(this.constructor.typeKey),"POST",{data:s}).then(function(t){e._persist(t)},function(){e._persist(null)})},login:function(){var e=this,t=this.get("store").get("defaultAdapter"),s={username:this.get("username"),password:this.get("password")};t.ajax(t.buildURL("login"),"GET",{data:s}).then(function(t){e._persist(t)},function(){e._persist(null)})},requestPasswordReset:function(){var e=this.get("store").get("defaultAdapter"),t={email:this.get("email")};e.ajax(e.buildURL("requestPasswordReset"),"POST",{data:t})}});